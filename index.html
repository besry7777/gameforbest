<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>PARTY ‡∏Ç‡∏µ‡πâ‡πÄ‡∏´‡∏•‡πâ‡∏≤</title>
<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;800&display=swap" rel="stylesheet">
<script defer src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>

<style>
/* ================= CSS ================= */
:root {
    --bg-color: #121212;
    --card-bg: #1e1e1e;
    --primary: #00e676;
    --text-main: #ffffff;
    --text-muted: #b0b0b0;
    --danger: #ef5350;
    --warning: #ffca28;
    --radius: 16px;
}

* {
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
    font-family: 'Sarabun', sans-serif;
    touch-action: manipulation; 
}

body {
    background-color: var(--bg-color);
    color: var(--text-main);
    margin: 0;
    padding: 0;
    height: 100dvh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

#game-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
    padding: 16px;
    position: relative;
    z-index: 1;
}

header {
    flex: 0 0 auto;
    text-align: center;
    margin-bottom: 10px;
}

h1 {
    font-size: 1.8rem;
    margin: 0;
    font-weight: 800;
    letter-spacing: 1px;
    color: var(--primary);
    text-transform: uppercase;
}

.display-area {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background-color: var(--card-bg);
    border-radius: var(--radius);
    padding: 20px;
    border: 1px solid #333;
    position: relative;
    margin-bottom: 16px;
    overflow: hidden;
    min-height: 0;
}

.big-instruction {
    font-size: clamp(1.4rem, 5vw, 2.2rem);
    font-weight: 800;
    color: #fff;
    text-align: center;
    line-height: 1.4;
    width: 100%;
    word-wrap: break-word;
    z-index: 2;
    max-height: 60vh;
    overflow-y: auto;
}

.category-badge {
    display: inline-block;
    padding: 6px 16px;
    border-radius: 50px;
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 15px;
    color: #000;
    opacity: 0;
    transition: opacity 0.3s;
}

.hint-text {
    margin-top: auto;
    padding-top: 15px;
    color: var(--text-muted);
    font-size: 0.8rem;
    letter-spacing: 1px;
    text-transform: uppercase;
}

.pop-in { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
@keyframes popIn {
    0% { transform: scale(0.8); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}
.blur-anim { filter: blur(4px); opacity: 0.6; }

.controls-area {
    flex: 0 0 auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.btn {
    width: 100%;
    padding: 18px;
    font-size: 1.3rem;
    border: none;
    border-radius: var(--radius);
    font-weight: 800;
    cursor: pointer;
    background-color: var(--primary);
    color: #000;
    transition: transform 0.1s;
}
.btn:active { transform: scale(0.97); }
.btn:disabled { background-color: #333; color: #555; cursor: not-allowed; }
.btn-secondary { background-color: #2c2c2c; color: #fff; font-size: 1rem; padding: 12px; }

#count-display {
    position: absolute; top: 10px; right: 10px;
    font-size: 0.75rem; color: #666; background: #111;
    padding: 4px 8px; border-radius: 6px;
}
#sound-toggle {
    position: absolute; top: 10px; left: 10px;
    background: transparent; color: #666; border: 1px solid #333;
    border-radius: 20px; padding: 4px 10px; font-size: 0.7rem; cursor: pointer;
}

/* Mini Games Area */
#special-game-area {
    margin-top: 15px;
    width: 100%;
    display: none;
    flex-direction: column;
    align-items: center;
    padding: 15px;
    background: rgba(255,255,255,0.05);
    border-radius: 12px;
    border: 1px solid #444;
}

.game-btn {
    background: var(--danger);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    width: 100%;
    margin-bottom: 10px;
}

.skip-btn {
    background: transparent;
    border: 1px solid #666;
    color: #888;
    padding: 8px 16px;
    border-radius: 30px;
    font-size: 0.9rem;
    cursor: pointer;
    margin-top: 5px;
}

.timer-text {
    font-size: clamp(3rem, 10vw, 5rem);
    font-weight: 800;
    color: var(--danger);
    font-variant-numeric: tabular-nums;
    margin: 10px 0;
}

/* Wire Buttons for Bomb Game */
.wire-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    width: 100%;
}
.wire-btn {
    height: 60px;
    border-radius: 8px;
    border: 3px solid rgba(255,255,255,0.2);
    cursor: pointer;
    transition: all 0.2s;
}

/* Modal History */
.modal-overlay {
    position: fixed; top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(3px);
    z-index: 100;
    display: flex; justify-content: center; align-items: flex-end;
    opacity: 0; pointer-events: none; transition: opacity 0.3s;
}
.modal-overlay.active { opacity: 1; pointer-events: all; }
.modal-content {
    background: #252525;
    width: 100%; max-width: 500px; height: 70vh;
    border-radius: 20px 20px 0 0;
    display: flex; flex-direction: column;
    transform: translateY(100%); transition: transform 0.3s ease;
}
.modal-overlay.active .modal-content { transform: translateY(0); }
.modal-header {
    padding: 15px 20px; border-bottom: 1px solid #333;
    display: flex; justify-content: space-between; align-items: center;
}
.modal-header h2 { margin: 0; font-size: 1.2rem; color: #fff; }
.close-modal { background: none; border: none; color: #aaa; font-size: 1.5rem; }
.history-list { flex: 1; overflow-y: auto; padding: 0; margin: 0; list-style: none; }
.history-item {
    padding: 15px 20px; border-bottom: 1px solid #333;
    font-size: 0.9rem; display: flex; align-items: flex-start; color: #ddd;
}
.history-tag {
    font-size: 0.65rem; padding: 2px 6px; border-radius: 4px;
    margin-right: 8px; color: #000; font-weight: bold; white-space: nowrap; margin-top: 3px;
}

/* --- Camera Overlay (‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏Å‡∏°‡∏´‡πâ‡∏≤‡∏°‡∏¢‡∏¥‡πâ‡∏°) --- */
#camera-overlay {
    position: fixed; top: 0; left: 0;
    width: 100%; height: 100%;
    background: #000;
    z-index: 2000;
    display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
#camera-video {
    position: absolute;
    width: 100%; height: 100%;
    object-fit: cover;
    opacity: 0.7;
}
#smile-ui-layer {
    position: relative; z-index: 2005;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    width: 100%; height: 100%;
    padding: 20px;
    text-align: center;
}
#smile-status {
    font-size: 1.5rem; font-weight: 800;
    color: #fff; text-shadow: 0 0 10px #000;
    margin-bottom: 20px;
}
#smile-timer {
    font-size: 5rem; font-weight: 800;
    color: #00e676;
    text-shadow: 0 0 20px #000;
    font-variant-numeric: tabular-nums;
}
.scanning-line {
    position: absolute; top: 0; left: 0; width: 100%; height: 5px;
    background: #00e676; box-shadow: 0 0 15px #00e676;
    z-index: 2001; animation: scan 2s infinite linear;
}
@keyframes scan { 0% { top: 0%; } 50% { top: 100%; } 100% { top: 0%; } }
.smile-detected {
    border: 10px solid #ef5350;
    box-shadow: inset 0 0 100px #ef5350;
}
@keyframes shake {
    0% { transform: translate(1px, 1px) rotate(0deg); }
    10% { transform: translate(-1px, -2px) rotate(-1deg); }
    30% { transform: translate(3px, 2px) rotate(0deg); }
    50% { transform: translate(-1px, 2px) rotate(1deg); }
    70% { transform: translate(3px, 1px) rotate(-1deg); }
    100% { transform: translate(1px, -2px) rotate(0deg); }
}
.back-btn {
    background: #fff; color: #000;
    border: none; padding: 15px 30px;
    border-radius: 50px; font-size: 1.2rem;
    font-weight: bold; margin-top: 30px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    display: none; cursor: pointer;
}
</style>
</head>

<body>

<div id="camera-overlay">
    <video id="camera-video" autoplay muted playsinline></video>
    <div class="scanning-line"></div>
    <div id="smile-ui-layer">
        <div id="smile-status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î AI...</div>
        <div id="smile-timer">--</div>
        <button class="back-btn" onclick="closeCameraGame()">üîô ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    </div>
</div>

<div id="game-container">
    <header>
        <h1>PARTY GAME</h1>
    </header>

    <div class="display-area">
        <button id="sound-toggle">üîä ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
        <div id="count-display"></div>

        <div id="category-badge" class="category-badge">CATEGORY</div>
        
        <div class="big-instruction" id="wheel-result">
            ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß<br>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏¢!
        </div>

        <div id="special-game-area"></div>

        <div class="hint-text">‡πÑ‡∏ó‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡πâ‡∏ß‡∏¢‡∏ó‡∏£‡∏≤‡∏¢ EDITION</div>
    </div>

    <div class="controls-area">
        <button class="btn" id="spin-btn" onclick="startSpin()">üî• ‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏∏‡πâ‡∏ô!</button>
        <button class="btn btn-secondary" onclick="openHistory()">üìú ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
    </div>
</div>

<div class="modal-overlay" id="historyModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</h2>
            <button class="close-modal" onclick="closeHistory()">‚úï</button>
        </div>
        <ul class="history-list" id="historyListDisplay"></ul>
    </div>
</div>

<audio id="clickSound" src="click.mp3"></audio>
<audio id="resultSound" src="result.mp3"></audio>
<audio id="alarmSound" src="alarm.mp3"></audio>
<audio id="gunSound" src="gun.mp3"></audio>
<audio id="bangSound" src="bang.wav"></audio>

<script>
// =================== 1. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ===================

const normalQuestions = [
   // --- ‡πÇ‡∏ã‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ / Hardcore ---
   { t: "‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡∏ß!", c: "HARDCORE", color: "#ff3b3b" },
    { t: "‡∏Ñ‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏î‡∏∑‡πà‡∏° 1 ‡∏ä‡πá‡∏≠‡∏ï", c: "‡∏î‡∏ß‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô", color: "#00ff88" },
    { t: "‡∏Ñ‡∏ô‡∏Ç‡∏ß‡∏≤‡∏î‡∏∑‡πà‡∏° 1 ‡∏ä‡πá‡∏≠‡∏ï", c: "‡∏î‡∏ß‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô", color: "#00ff88" },
    { t: "‡πÄ‡∏û‡∏®‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡∏î‡∏∑‡πà‡∏°‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏î", c: "HARDCORE", color: "#ff3b3b" },
    { t: "‡∏Ñ‡∏ô‡πÇ‡∏™‡∏î‡∏î‡∏∑‡πà‡∏°!", c: "STATUS", color: "#00ccff" },
    { t: "‡∏Ñ‡∏ô‡∏°‡∏µ‡πÅ‡∏ü‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏î‡∏∑‡πà‡∏°!", c: "STATUS", color: "#00ccff" },
    { t: "‡∏Ñ‡∏ô‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏™‡∏µ‡∏î‡∏≥‡∏î‡∏∑‡πà‡∏°", c: "LOOKS", color: "#ff00cc" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏ï‡∏µ‡πâ‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ß‡∏á‡∏î‡∏∑‡πà‡∏°", c: "BODY", color: "#ff00cc" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ß‡∏á‡∏î‡∏∑‡πà‡∏°", c: "BODY", color: "#ff00cc" },
    { t: "‡∏Ñ‡∏ô‡πÉ‡∏™‡πà‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á‡∏Ç‡∏≤‡∏™‡∏±‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏ô‡∏î‡∏∑‡πà‡∏° 1 ‡∏Ñ‡∏ô", c: "LOOKS", color: "#ff00cc" },
    { t: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏∑‡πà‡∏°‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÜ", c: "BUDDY", color: "#ffae00" },
    { t: "‡∏™‡∏±‡πà‡∏á‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏î‡∏∑‡πà‡∏° 2 ‡∏ä‡πá‡∏≠‡∏ï", c: "POWER", color: "#ffd700" },
    { t: "‡∏Ñ‡∏ô‡∏Å‡∏î‡∏£‡∏≠‡∏î! ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏î‡∏∑‡πà‡∏°", c: "LUCKY", color: "#ffd700" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏≠‡∏≤‡∏¢‡∏∏‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏•‡∏∏‡∏Å‡πÄ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏î‡∏∑‡πà‡∏°", c: "AGE", color: "#00ccff" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏≠‡∏≤‡∏¢‡∏∏‡∏°‡∏≤‡∏Å‡∏™‡∏∏‡∏î‡∏•‡∏∏‡∏Å‡πÄ‡πÄ‡∏Å‡πã‡πÜ5‡∏Å‡πâ‡∏≤‡∏ß‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏î‡∏∑‡πà‡∏°", c: "AGE", color: "#00ccff" },
    { t: "‡∏Ñ‡∏ô‡πÉ‡∏™‡πà‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡πÅ‡∏Å‡πà‡∏™‡∏∏‡∏î‡∏î‡∏∑‡πà‡∏°", c: "LOOKS", color: "#ff00cc" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°", c: "FAMILY", color: "#00ccff" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏°‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ...‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥‡πÄ‡∏õ‡∏•‡πà‡∏≤ (‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏´‡∏•‡πâ‡∏≤)", c: "SAFETY", color: "#00ff88" },
    { t: "‡∏Ñ‡∏ô‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏Ñ‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏î‡∏∑‡πà‡∏°", c: "ACTION", color: "#ffae00" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÉ‡∏ä‡πâ iPhone ‡∏î‡∏∑‡πà‡∏°", c: "LIFESTYLE", color: "#b19cd9" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÉ‡∏ä‡πâ Android ‡∏î‡∏∑‡πà‡∏°", c: "LIFESTYLE", color: "#b19cd9" },
    { t: "‡∏Ñ‡∏ô‡∏ú‡∏°‡∏™‡∏±‡πâ‡∏ô‡∏î‡∏∑‡πà‡∏°", c: "LOOKS", color: "#ff00cc" },
    { t: "‡∏Ñ‡∏ô‡∏ú‡∏°‡∏¢‡∏≤‡∏ß‡∏î‡∏∑‡πà‡∏°", c: "LOOKS", color: "#ff00cc" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÉ‡∏™‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö (‡πÅ‡∏´‡∏ß‡∏ô/‡∏™‡∏£‡πâ‡∏≠‡∏¢/‡∏ï‡∏∏‡πâ‡∏°‡∏´‡∏π) ‡∏î‡∏∑‡πà‡∏°", c: "LOOKS", color: "#ff00cc" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏ï‡∏∑‡πà‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏î‡∏∑‡πà‡∏° ‡∏û‡∏±‡∏Å‡∏ï‡∏±‡∏ö", c: "LIFESTYLE", color: "#b19cd9" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏≠‡∏≤‡∏ö‡∏ô‡πâ‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡∏°‡∏≤‡∏î‡∏∑‡πà‡∏°(‡πÄ‡∏õ‡πà‡∏≤‡∏¢‡∏¥‡πà‡∏á‡∏â‡∏∏‡∏ö‡∏ñ‡πâ‡∏≤‡∏°‡∏µ2‡∏Ñ‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ)", c: "HYGIENE", color: "#00ccff" },
    { t: "‡∏î‡∏∑‡πà‡∏°‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡∏ß ‡∏ó‡∏≥‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°", c: "CHALLENGE", color: "#ffae00" },
    { t: "‡∏Ñ‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏î‡∏∑‡πà‡∏°!", c: "DARE", color: "#ff3b3b" },
    { t: "‡∏ä‡∏ô‡πÅ‡∏Å‡πâ‡∏ß‡∏£‡∏≠‡∏ö‡∏ß‡∏á!", c: "PARTY", color: "#ffd700" },
    { t: "‡∏Ñ‡∏ô‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡∏î‡∏∑‡πà‡∏°‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡πÅ‡∏Å‡πâ‡∏ß", c: "BAD LUCK", color: "#888" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡∏∑‡πà‡∏°", c: "TIME", color: "#b19cd9" },
    { t: "‡∏Ñ‡∏ô‡∏Ñ‡∏≠‡∏≠‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ß‡∏á...‡∏î‡∏∑‡πà‡∏°!(‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏á‡∏õ‡∏¥‡∏î‡∏ï‡∏≤‡πÇ‡∏´‡∏ß‡∏ï)", c: "VOTE", color: "#ff3b3b" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°...‡∏î‡∏∑‡πà‡∏°!", c: "BODY", color: "#ff00cc" },
    { t: "‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏£‡∏≠‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏∑‡πà‡∏°", c: "‡∏î‡∏ß‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô", color: "#ffd700" },
    { t: "‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏ô‡πÄ‡∏ó‡πÄ‡∏´‡∏•‡πâ‡∏≤‡∏ß‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏Å‡∏¥‡∏ô‡πÑ‡∏´‡∏°", c: "‡∏î‡∏ß‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô", color: "#ffd700" },
    { t: "‡∏•‡∏∏‡∏Å‡πÄ‡∏ï‡πâ‡∏ô '‡∏á‡∏±‡∏î‡∏ñ‡∏±‡πà‡∏á‡∏á‡∏±‡∏î' ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô...‡∏î‡∏∑‡πà‡∏°!", c: "DANCE", color: "#ffae00" },
    { t: "‡∏Ñ‡∏ô‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏°‡∏µ‡∏Å‡∏£‡∏∞‡∏î‡∏∏‡∏°‡∏î‡∏∑‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏∏‡∏°", c: "LOOKS", color: "#ff00cc" },
    { t: "‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å", c: "GAME MASTER", color: "#ffd700" },
    { t: "‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏£‡∏∞ (‡πÄ‡∏≠, ‡πÅ‡∏≠, ‡πÇ‡∏≠) ‡∏î‡∏∑‡πà‡∏°!", c: "NAME", color: "#00ccff" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏ñ‡∏∑‡∏≠‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ...‡∏î‡∏∑‡πà‡∏°!", c: "ADDICT", color: "#b19cd9" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏™‡∏∞‡∏û‡∏≤‡∏¢‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏°‡∏≤...‡∏î‡∏∑‡πà‡∏°!", c: "LOOKS", color: "#ff00cc" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏≠‡∏¢‡∏™‡∏±‡∏Å...‡∏î‡∏∑‡πà‡∏°!", c: "INK", color: "#555" },
    { t: "‡∏Ñ‡∏ô‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏™‡∏≤‡∏ß‡∏î‡∏∑‡πà‡∏° ‡∏Ñ‡∏ô‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏á‡∏™‡∏≤‡∏ß‡∏£‡∏≠‡∏î!", c: "FAMILY", color: "#00ccff" },
    { t: "‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡∏î‡∏∑‡πà‡∏° (‡πÅ‡∏Ñ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏î‡∏∑‡πà‡∏°‡∏î‡∏±‡∏ö‡∏Å‡∏£‡∏∞‡∏´‡∏≤‡∏¢)", c: "FAMILY", color: "#00ccff" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Ñ‡∏¢‡∏£‡πâ‡∏≠‡∏á‡πÑ‡∏´‡πà‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢...‡∏û‡∏±‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏î‡∏∑‡πà‡∏°‡πÅ‡∏ó‡∏ô (‡∏î‡∏∑‡πà‡∏°‡∏õ‡∏•‡∏≠‡∏ö‡πÉ‡∏à‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô)", c: "SCHOOL", color: "#b19cd9" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÅ‡∏ï‡πà‡∏á‡∏ï‡∏±‡∏ß‡∏°‡∏≤‡∏à‡∏±‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏™‡∏≤‡∏¢‡∏ï‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô...‡∏î‡∏∑‡πà‡∏°!", c: "FASHION", color: "#ff00cc" },
    { t: "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô‡πÉ‡∏Ñ‡∏£‡∏ô‡∏≠‡∏ô‡πÄ‡∏£‡πá‡∏ß (‡∏Å‡πà‡∏≠‡∏ô 2 ‡∏ó‡∏∏‡πà‡∏°) ‡∏î‡∏∑‡πà‡∏°!", c: "LIFESTYLE", color: "#b19cd9" },
    { t: "‡∏Ñ‡∏ô‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏£‡∏∞‡∏î‡∏∏‡∏°‡∏£‡∏≠‡∏î ‡∏Ñ‡∏ô‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏°‡∏µ‡∏Å‡∏£‡∏∞‡∏î‡∏∏‡∏°‡∏î‡∏∑‡πà‡∏°‡∏°‡∏°!(‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏Å‡∏î‡∏î‡∏∑‡πà‡∏°)", c: "LOOKS", color: "#ff00cc" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡∏´‡∏≠‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ...‡∏î‡∏∑‡πà‡∏°!", c: "SMELL", color: "#ff00cc" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏£‡∏∞‡∏ú‡∏°‡∏°‡∏≤...‡∏î‡∏∑‡πà‡∏°!", c: "HYGIENE", color: "#555" },
    { t: "‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏ü‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∏‡πà‡∏ô‡∏û‡∏µ‡πà...‡∏î‡∏∑‡πà‡∏°!", c: "EX-LOVE", color: "#ff3b3b" },
    { t: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏¥‡∏ô", c: "FRIEND", color: "#00ff88" },
    { t: "‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏°‡∏µ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏î‡∏∑‡πà‡∏° ...‡∏î‡∏∑‡πà‡∏°!", c: "Luck", color: "#ff3b3b" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏≠‡∏±‡∏û‡∏™‡∏ï‡∏≠‡∏£‡∏µ‡πà IG ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏≠‡∏±‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ...‡∏î‡∏∑‡πà‡∏°!", c: "SOCIAL", color: "#b19cd9" },
    { t: "‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏µ‡πà...‡∏î‡∏∑‡πà‡∏°!", c: "LUCK", color: "#ffd700" },
    { t: "‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏π‡πà...‡∏î‡∏∑‡πà‡∏°!", c: "LUCK", color: "#ffd700" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏≠‡∏≤‡∏¢‡∏∏‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏µ‡πà...‡∏î‡∏∑‡πà‡∏°!", c: "LUCK", color: "#ffd700" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏≠‡∏≤‡∏¢‡∏∏‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏π‡πà...‡∏î‡∏∑‡πà‡∏°!", c: "LUCK", color: "#ffd700" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏ô‡∏±‡πà‡∏á‡πÉ‡∏Å‡∏•‡πâ‡πÅ‡∏Å‡πâ‡∏ß‡πÄ‡∏´‡∏•‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏î‡∏∑‡πà‡∏°", c: "LUCK", color: "#ffd700" },
    { t: "‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏£‡∏∞ (‡∏≠‡∏¥, ‡∏≠‡∏µ, ‡∏≠‡∏≤) ‡∏î‡∏∑‡πà‡∏°!", c: "NAME", color: "#00ccff" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Ñ‡∏¢‡πÇ‡∏Å‡∏´‡∏Å‡πÅ‡∏°‡πà‡∏ß‡πà‡∏≤ '‡∏ô‡∏≠‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô' ‡πÅ‡∏ï‡πà‡πÑ‡∏õ‡∏´‡∏≤‡∏ú‡∏π‡πâ...‡∏î‡∏∑‡πà‡∏°!", c: "SECRET", color: "#ff3b3b" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Ñ‡∏¢ '‡∏â‡∏µ‡πà‡∏£‡∏≤‡∏î' ‡∏ï‡∏≠‡∏ô‡πÇ‡∏ï‡πÅ‡∏•‡πâ‡∏ß (‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏°‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏î‡∏∑‡πà‡∏°‡∏¢‡∏Å‡∏ß‡∏á) ‡∏î‡∏∑‡πà‡∏°!", c: "SECRET", color: "#888" },
    { t: "‡∏ä‡∏ô‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡πâ‡∏≥‡∏£‡∏≠‡∏ö‡∏ß‡∏á‡πÄ‡∏ö‡∏≤‡πÜ ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡∏π‡πâ!", c: "QUIET", color: "#00ff88" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏≤‡∏∞‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ß‡∏á ‡∏î‡∏∑‡πà‡∏°!", c: "HAPPY", color: "#ffae00" },
    // --- ‡πÇ‡∏ã‡∏ô‡∏à‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏£‡∏π‡∏õ‡∏£‡πà‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤ ---
    { t: "‡πÉ‡∏Ñ‡∏£‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß (‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÄ‡∏õ‡∏∑‡πâ‡∏≠‡∏ô‡∏ô‡∏∞)...‡∏î‡∏∑‡πà‡∏°!", c: "LOOKS", color: "#fff" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÉ‡∏™‡πà‡∏Å‡∏≤‡∏á‡πÄ‡∏Å‡∏á‡∏™‡∏µ‡∏â‡∏π‡∏î‡∏â‡∏≤‡∏î (‡πÅ‡∏î‡∏á/‡∏™‡πâ‡∏°/‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á) ‡∏î‡∏∑‡πà‡∏°!", c: "UNDERWEAR", color: "#ff3b3b" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÅ‡∏Ç‡∏ô‡∏¢‡∏≤‡∏ß‡∏°‡∏≤...‡∏î‡∏∑‡πà‡∏° (‡πÅ‡∏Å‡πâ‡∏´‡∏ô‡∏≤‡∏ß)", c: "Cool", color: "#ff3b3b" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏ï‡∏Å...‡∏î‡∏∑‡πà‡∏°‡∏ã‡∏∞ ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏™‡∏π‡πâ‡∏Å‡∏•‡∏±‡∏ö!", c: "SAD", color: "#888" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ...‡∏î‡∏∑‡πà‡∏°‡∏ã‡∏±‡∏ö‡∏°‡∏±‡∏ô‡∏´‡∏ô‡πà‡∏≠‡∏¢", c: "FACE", color: "#ff00cc" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏≠‡πâ‡∏ß‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡πÇ‡∏•...‡∏î‡∏∑‡πà‡∏°!", c: "BODY", color: "#ff00cc" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÅ‡∏ï‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏ô‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ß‡∏á ‡∏î‡∏∑‡πà‡∏°!", c: "MAKEUP", color: "#ff00cc" },
    // --- ‡πÇ‡∏ã‡∏ô‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏° & ‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏• ---
    { t: "‡πÉ‡∏Ñ‡∏£‡πÅ‡∏ö‡∏ï‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 20% ‡∏î‡∏∑‡πà‡∏°!", c: "BATTERY", color: "#ff3b3b" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏π‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á...‡∏î‡∏∑‡πà‡∏° (‡∏´‡∏•‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ô‡∏∞)", c: "NARCISSIST", color: "#b19cd9" },
    { t: "‡πÉ‡∏Ñ‡∏£ Follow IG ‡∏¢‡∏≠‡∏î‡∏ü‡∏≠‡∏•‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏¢‡∏≠‡∏î‡∏ü‡∏≠‡∏•‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô...‡∏î‡∏∑‡πà‡∏°!", c: "SOCIAL", color: "#b19cd9" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏î‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡πÄ‡∏Å‡πà‡∏á ‡∏ï‡∏≠‡∏ö‡∏ä‡πâ‡∏≤‡∏Ç‡πâ‡∏≤‡∏°‡∏ß‡∏±‡∏ô...‡∏î‡∏∑‡πà‡∏°!", c: "SOCIAL", color: "#b19cd9" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏Å‡∏î‡πÉ‡∏à TikTok ‡∏Ñ‡∏£‡∏¥‡∏õ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î‡∏Å‡∏î‡πÉ‡∏à‡∏ô‡πâ‡∏≠‡∏¢‡∏™‡∏∏‡∏î ‡∏î‡∏∑‡πà‡∏°!", c: "SOCIAL", color: "#000" },
    { t: "‡πÉ‡∏Ñ‡∏£‡∏û‡∏π‡∏î‡∏Ñ‡∏≥‡∏´‡∏¢‡∏≤‡∏ö‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ...‡∏î‡∏∑‡πà‡∏°‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏≤‡∏Å", c: "RUDE", color: "#555" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÅ‡∏ö‡∏ï‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ 90-50% (‡∏û‡∏ß‡∏Å‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡∏°‡∏≤‡∏î‡∏µ)...‡∏î‡∏∑‡πà‡∏°!", c: "BATTERY", color: "#00ff88" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏µ‡πà (‡∏°.‡∏Ñ., ‡∏°‡∏µ.‡∏Ñ., ‡∏û.‡∏Ñ., ...) ‡∏î‡∏∑‡πà‡∏°!", c: "BIRTH MONTH", color: "#00ccff" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏π‡πà (‡∏Å.‡∏û., ‡πÄ‡∏°.‡∏¢., ‡∏°‡∏¥.‡∏¢., ...) ‡∏î‡∏∑‡πà‡∏°!", c: "BIRTH MONTH", color: "#00ccff" },
    // --- ‡πÇ‡∏ã‡∏ô‡∏ß‡∏±‡∏î‡∏î‡∏ß‡∏á & Action ---
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå...‡∏î‡∏∑‡πà‡∏°!", c: "BIRTHDAY", color: "#ff0000" }, // ‡∏™‡∏µ‡πÅ‡∏î‡∏á
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå...‡∏î‡∏∑‡πà‡∏°!", c: "BIRTHDAY", color: "#ffff00" }, // ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå...‡∏î‡∏∑‡πà‡∏°!", c: "BIRTHDAY", color: "#00ccff" }, // ‡∏™‡∏µ‡∏ü‡πâ‡∏≤
    { t: "‡πÇ‡∏¢‡∏ô‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏´‡∏±‡∏ß‡∏Å‡πâ‡∏≠‡∏¢ (‡∏≠‡∏≠‡∏Å‡∏´‡∏±‡∏ß=‡∏ã‡πâ‡∏≤‡∏¢‡∏î‡∏∑‡πà‡∏°, ‡∏≠‡∏≠‡∏Å‡∏Å‡πâ‡∏≠‡∏¢=‡∏Ç‡∏ß‡∏≤‡∏î‡∏∑‡πà‡∏°)", c: "LUCK", color: "#ffd700" },
    { t: "‡∏à‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏° ‡∏´‡πâ‡∏≤‡∏°‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö‡∏ï‡∏≤ ‡πÉ‡∏Ñ‡∏£‡πÅ‡∏û‡πâ‡∏î‡∏∑‡πà‡∏°!", c: "BATTLE", color: "#ff3b3b" },
    { t: "‡πÇ‡∏ó‡∏£‡∏´‡∏≤‡∏Ñ‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏≤‡∏á (‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏î‡∏∑‡πà‡∏°‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡∏ß!)", c: "DARE", color: "#ff3b3b" },
    { t: "‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏°‡∏∑‡∏≠‡∏´‡∏¢‡∏¥‡∏Å‡πÅ‡∏Å‡πâ‡∏° 1 ‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏¥‡∏Å ‡∏î‡∏∑‡πà‡∏°)", c: "TOUCH", color: "#ffae00" },
    { t: "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ô‡∏µ‡πâ! (‡∏Ñ‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡∏î‡∏∑‡πà‡∏°)", c: "ACTION", color: "#00ff88" },
    { t: "‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏≤‡∏∞‡πÅ‡∏ö‡∏ö‡∏ô‡∏≤‡∏á‡∏£‡πâ‡∏≤‡∏¢ 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏î‡∏∑‡πà‡∏°)", c: "ACTING", color: "#b19cd9" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏î‡∏∑‡πà‡∏°‡∏â‡∏•‡∏≠‡∏á!", c: "BIRTHDAY", color: "#ffd700" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÇ‡∏™‡∏î‡πÄ‡∏Å‡∏¥‡∏ô 2 ‡∏õ‡∏µ ‡∏î‡∏∑‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÄ‡∏´‡∏á‡∏≤", c: "LONELY", color: "#555" },
    // --- ‡πÇ‡∏ã‡∏ô Hardcore 18+ & ‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ---
    { t: "‡πÉ‡∏Ñ‡∏£‡∏°‡∏µ‡πÅ‡∏≠‡∏û‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 2 ‡πÅ‡∏≠‡∏û ‡∏î‡∏∑‡πà‡∏°!", c: "MONEY", color: "#00ff88" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Ñ‡∏¢‡πÇ‡∏î‡∏ô‡∏à‡∏±‡∏ö‡πÄ‡∏õ‡πà‡∏≤‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå...‡∏î‡∏∑‡πà‡∏°!", c: "POLICE", color: "#ff3b3b" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Ñ‡∏¢‡∏à‡∏π‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏û‡∏®‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡∏î‡∏∑‡πà‡∏°!", c: "SECRET", color: "#ff00cc" },
    { t: "‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏î‡∏∑‡πà‡∏°!", c: "LOUD", color: "#ffae00" },
    { t: "‡πÉ‡∏Ñ‡∏£‡πÄ‡∏ñ‡∏µ‡∏¢‡∏á‡πÄ‡∏Å‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ß‡∏á ‡∏î‡∏∑‡πà‡∏° 2 ‡∏ä‡πá‡∏≠‡∏ï!", c: "ARGUE", color: "#ff3b3b" },
    { t: "‡∏Ñ‡∏ô‡∏Å‡∏î‡∏•‡∏∏‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏≤‡∏á‡πÅ‡∏ö‡∏ö 5 ‡∏Å‡πâ‡∏≤‡∏ß ‡πÉ‡∏Ñ‡∏£‡∏Ç‡∏≥ ‡∏î‡∏∑‡πà‡∏°(‡πÑ‡∏°‡πà‡∏•‡∏∏‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏î‡∏∑‡πà‡∏° 2 ‡πÅ‡∏Å‡πâ‡∏ß)", c: "MODEL", color: "#ff00cc" },
    { t: "‡∏ó‡∏≥‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏´‡∏°‡∏≤/‡πÅ‡∏°‡∏ß 3 ‡∏ß‡∏¥ (‡πÑ‡∏°‡πà‡∏ó‡∏≥ ‡∏î‡∏∑‡πà‡∏° 2 ‡∏ä‡πá‡∏≠‡∏ï)", c: "ACTING", color: "#ffae00" },
    { t: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏Ñ‡∏ô ‡∏î‡∏∑‡πà‡∏°‡πÅ‡∏ó‡∏ô‡∏Ñ‡∏∏‡∏ì 1 ‡πÅ‡∏Å‡πâ‡∏ß", c: "VIP", color: "#ffd700" },
    { t: "‡∏Ñ‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ö‡∏Ç‡∏ß‡∏≤‡πÄ‡∏õ‡πà‡∏≤‡∏¢‡∏¥‡πâ‡∏á‡∏â‡∏∏‡∏ö ‡∏Ñ‡∏ô‡πÅ‡∏û‡πâ‡∏î‡∏∑‡πà‡∏°!", c: "BATTLE", color: "#ff3b3b" },
    { t: "‡∏î‡∏∑‡πà‡∏°‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡πÅ‡∏Å‡πâ‡∏ß ‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡πÉ‡∏´‡πâ‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ", c: "SILENCE", color: "#888" }
];

const specialGamesList = [
    { t: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ 40 ‡∏ß‡∏¥ ‡πÉ‡∏Ñ‡∏£‡πÄ‡∏õ‡∏•‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡πà‡∏≠‡∏ô ‚Üí ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏î‡∏∑‡πà‡∏° 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á", c: "MINI GAME", color: "#ffca28", type: "timer", time: 40 },
    { t: "‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà 5.00 ‡∏ß‡∏¥ (¬±0.10) ‡πÉ‡∏Ñ‡∏£‡∏û‡∏•‡∏≤‡∏î‡∏î‡∏∑‡πà‡∏°!", c: "SKILL", color: "#42a5f5", type: "stopwatch", target: 5.00, range: 0.10 },
    { t: "‡∏™‡πà‡∏á‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏ß‡∏ô‡πÑ‡∏õ ‡∏Å‡∏î‡πÄ‡∏´‡∏ô‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏Å..‡πÉ‡∏Ñ‡∏£‡πÇ‡∏î‡∏ô‡∏î‡∏∑‡πà‡∏°!", c: "LUCK", color: "#ef5350", type: "roulette" },
    { t: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏î‡∏™‡∏≤‡∏¢‡πÑ‡∏ü 1 ‡πÄ‡∏™‡πâ‡∏ô...‡πÉ‡∏Ñ‡∏£‡∏ó‡∏≥‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏î‡∏∑‡πà‡∏°!", c: "BOMB", color: "#ef5350", type: "bomb" },
    { t: "‡πÄ‡∏Å‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥! ‡∏à‡∏≥‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡πâ‡∏î‡∏µ ‡∏ó‡∏≤‡∏¢‡∏ú‡∏¥‡∏î‡∏î‡∏∑‡πà‡∏°!", c: "MEMORY", color: "#ab47bc", type: "memory" },
    { t: "‡∏™‡∏∏‡πà‡∏° A ‡∏ñ‡∏∂‡∏á Z ‡πÉ‡∏Ñ‡∏£‡∏°‡∏µ‡πÉ‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏£‡∏¥‡∏á ‡∏î‡∏∑‡πà‡∏°!", c: "NAME", color: "#00ccff", type: "alphabet" },
    { t: "‡∏à‡∏≥‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏™‡∏µ‡πÉ‡∏´‡πâ‡∏ó‡∏±‡∏ô! (Simon Says)", c: "MEMORY", color: "#e91e63", type: "simon" },
    { t: "‡∏´‡∏°‡∏∏‡∏ô‡∏Ç‡∏ß‡∏î‡∏ß‡∏±‡∏î‡∏î‡∏ß‡∏á! (‡∏ä‡∏µ‡πâ‡πÉ‡∏Ñ‡∏£‡∏î‡∏∑‡πà‡∏°)", c: "LUCK", color: "#8bc34a", type: "bottle" },
    { t: "‡∏ö‡∏ß‡∏Å‡∏•‡∏ö‡πÄ‡∏•‡∏Ç‡πÑ‡∏´‡∏•! (‡πÄ‡∏ä‡πà‡∏ô 2+3-1=?)", c: "MATH", color: "#607d8b", type: "chainmath" },
    { t: "‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏à‡∏¥‡πâ‡∏°‡∏à‡∏≠! (2 ‡∏Ñ‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏à‡∏¥‡πâ‡∏°)", c: "BATTLE", color: "#ff1744", type: "tapwar" },
];

// =================== 2. ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏£‡∏∞‡∏ö‡∏ö ===================
let availableQuestions = [...normalQuestions];
let history = []; 
let turnCount = 0;
let nextGameThreshold = Math.floor(Math.random() * 4) + 7; 

let soundEnabled = true;
const clickSound = document.getElementById("clickSound");
const resultSound = document.getElementById("resultSound");
const alarmSound = document.getElementById("alarmSound");
const gunSound = document.getElementById("gunSound");
const bangSound = document.getElementById("bangSound");
const soundToggle = document.getElementById("sound-toggle");

const resultDisplay = document.getElementById('wheel-result');
const spinBtn = document.getElementById('spin-btn');
const countDisplay = document.getElementById('count-display');
const categoryBadge = document.getElementById('category-badge');
const specialGameArea = document.getElementById('special-game-area');

// =================== 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å ===================

soundToggle.onclick = () => {
    soundEnabled = !soundEnabled;
    soundToggle.innerText = soundEnabled ? "üîä ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á" : "üîá ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á";
    soundToggle.style.opacity = soundEnabled ? "1" : "0.5";
};

function playSound(sound) {
    if (!soundEnabled) return;
    if (!sound.paused) return; // ‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ã‡πâ‡∏≠‡∏ô
    sound.play().catch(()=>{});
}


function updateCountDisplay() {
    countDisplay.innerText = `${availableQuestions.length} / ${normalQuestions.length}`;
}

updateCountDisplay();

function startSpin() {
    specialGameArea.style.display = 'none';
    specialGameArea.innerHTML = ''; 
    categoryBadge.style.opacity = '0';
    
    if (availableQuestions.length === 0) {
        alert("üéâ ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß! ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÉ‡∏´‡∏°‡πà");
        availableQuestions = [...normalQuestions];
        history = [];
        updateCountDisplay();
    }

    playSound(clickSound); 
    spinBtn.disabled = true;
    resultDisplay.classList.remove("pop-in");
    resultDisplay.classList.add("blur-anim");

    let shuffleInterval = setInterval(() => {
        const randomQ = availableQuestions[Math.floor(Math.random() * availableQuestions.length)];
        resultDisplay.innerText = randomQ ? randomQ.t : "Loading...";
    }, 50);

    setTimeout(() => {
        clearInterval(shuffleInterval);
        processResult();
    }, 1200);
}

// ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÑ‡∏ß‡πâ‡πÉ‡∏ô scope ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö specialGamesList ‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö
let availableSpecialGames = []; 

function processResult() {
    turnCount++;
    let selectedObj;

    if (turnCount >= nextGameThreshold) {

        if (availableSpecialGames.length === 0) {
            availableSpecialGames = [...specialGamesList];
        }

        const gameIndex = Math.floor(Math.random() * availableSpecialGames.length);
        selectedObj = availableSpecialGames[gameIndex];

        availableSpecialGames.splice(gameIndex, 1);

        turnCount = 0;
        nextGameThreshold = Math.floor(Math.random() * 4) + 5;

    } else {
        if (availableQuestions.length === 0) {
             console.log("‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß!"); 
        }

        if (availableQuestions.length > 0) {
            const index = Math.floor(Math.random() * availableQuestions.length);
            selectedObj = availableQuestions[index];
            availableQuestions.splice(index, 1);
        }
    }

    history.unshift(selectedObj);
    resultDisplay.classList.remove("blur-anim");
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ selectedObj ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏ì‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï)
    if (selectedObj) {
        resultDisplay.innerText = selectedObj.t;
        categoryBadge.innerText = selectedObj.c;
        categoryBadge.style.backgroundColor = selectedObj.color;
        categoryBadge.style.color = "#000"; 
        categoryBadge.style.opacity = '1';

        void resultDisplay.offsetWidth; 
        resultDisplay.classList.add("pop-in");
        playSound(resultSound);

        if (selectedObj.type) {
            setupGame(selectedObj);
        } else {
            spinBtn.disabled = false;
        }
    }
    
    updateCountDisplay();
}

// =================== 4. Logic Games ===================

async function setupGame(gameObj) {
    specialGameArea.style.display = 'flex';
    if (gameObj.type === 'timer') setupTimerGame(gameObj.time);
    else if (gameObj.type === 'stopwatch') setupStopwatchGame(gameObj.target, gameObj.range);
    else if (gameObj.type === 'roulette') setupRouletteGame();
    else if (gameObj.type === 'bomb') setupBombGame();
    else if (gameObj.type === 'memory') setupMemoryGame();
    else if (gameObj.type === 'alphabet') setupAlphabetGame(); 
    else if (gameObj.type === 'simon') setupSimonGame();
    else if (gameObj.type === 'bottle') setupBottleGame();
    else if (gameObj.type === 'chainmath') setupChainMathGame();
    else if (gameObj.type === 'tapwar') setupTapWarGame();
}

function skipGame() {
    clearInterval(window.currentInterval);
    specialGameArea.style.display = 'none';
    spinBtn.disabled = false;
    playSound(clickSound);
}

function getSkipButtonHTML() {
    return `<button class="skip-btn" onclick="skipGame()">‚è≠ ‡∏Ç‡πâ‡∏≤‡∏°‡πÄ‡∏Å‡∏°‡∏ô‡∏µ‡πâ</button>`;
}

// --- Game 1-5 Logic (‡πÄ‡∏î‡∏¥‡∏°) ---
function setupTimerGame(seconds) {
    specialGameArea.innerHTML = `<button class="game-btn" onclick="runTimer(${seconds})">‚è±Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ (${seconds} ‡∏ß‡∏¥)</button>${getSkipButtonHTML()}`;
}
function runTimer(seconds) {
    let timeLeft = seconds;
    specialGameArea.innerHTML = `<div class="timer-text" id="game-timer">${timeLeft}</div>${getSkipButtonHTML()}`;
    window.currentInterval = setInterval(() => {
        timeLeft--;
        document.getElementById('game-timer').innerText = timeLeft;
        if (timeLeft <= 5 && timeLeft > 0) playSound(clickSound);
        if (timeLeft <= 0) {
            clearInterval(window.currentInterval);
            document.getElementById('game-timer').innerText = "‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!";
            playSound(alarmSound);
            spinBtn.disabled = false;
        }
    }, 1000);
}

// --- Stopwatch Blind Game Logic (Fixed & Hardcore-Ready) ---
function setupStopwatchGame(target, range) {
    specialGameArea.style.display = 'flex';
    specialGameArea.innerHTML = `
        <div style="margin-bottom:10px; font-size:1.1rem;">
            ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: <span style="color:#00e676; font-weight:800;">
            ${target.toFixed(2)}</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        </div>
        <div style="font-size:0.8rem; color:#aaa; margin-bottom:15px;">
            (‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 2.00 ‡∏ß‡∏¥ ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ!)
        </div>
        <button class="game-btn" onclick="runStopwatch(${target}, ${range})">
            ‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤!
        </button>
        ${getSkipButtonHTML()}
    `;
}

function runStopwatch(target, range) {
    if (window.currentInterval) {
        clearInterval(window.currentInterval);
    }

    window.swStart = performance.now();

    specialGameArea.innerHTML = `
        <div class="timer-text" id="sw-display">0.00</div>
        <div id="blind-status"
             style="margin-bottom:15px; height:20px; color:#ffca28; font-weight:bold;">
        </div>
        <button class="game-btn" id="stop-btn">üü• ‡∏´‡∏¢‡∏∏‡∏î!</button>
        ${getSkipButtonHTML()}
    `;

    // üî• ‡∏ú‡∏π‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏¢‡∏∏‡∏î‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)
    const stopBtn = document.getElementById("stop-btn");
    stopBtn.addEventListener("click", () => {
        stopStopwatch(target, range);
    });

    window.currentInterval = setInterval(() => {
        const elapsed = (performance.now() - window.swStart) / 1000;
        const display = document.getElementById("sw-display");
        const status = document.getElementById("blind-status");

        if (!display) return; // ‡∏Å‡∏±‡∏ô DOM ‡∏´‡∏≤‡∏¢

        if (elapsed <= 2) {
            display.innerText = elapsed.toFixed(2);
        } else {
            display.innerText = "?.??";
            display.style.color = "#ef5350";
            status.innerText = "üôà ‡πÉ‡∏ä‡πâ‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏ç‡∏≤‡∏ì‡∏•‡πâ‡∏ß‡∏ô ‡πÜ";
        }
    }, 30);
}

function stopStopwatch(target, range) {
    if (!window.swStart) return; // ‡∏Å‡∏±‡∏ô‡∏Å‡∏î‡∏ã‡πâ‡∏≥

    clearInterval(window.currentInterval);
    window.currentInterval = null;

    const finalTime = (performance.now() - window.swStart) / 1000;
    window.swStart = null;

    const diff = Math.abs(finalTime - target);

    const display = document.getElementById("sw-display");
    const status = document.getElementById("blind-status");
    const stopBtn = document.getElementById("stop-btn");

    if (!display || !stopBtn) return;

    display.innerText = finalTime.toFixed(2);
    display.style.color = "#fff";

    if (diff <= range) {
        playSound(alarmSound);
        status.innerText = `üéØ ‡πÅ‡∏°‡πà‡∏ô! ‡∏û‡∏•‡∏≤‡∏î ${diff.toFixed(2)} ‡∏ß‡∏¥`;
        status.style.color = "#00e676";
        stopBtn.innerText = "‡∏£‡∏≠‡∏î! ‚úÖ";
        stopBtn.style.background = "#00e676";
    } else {
        playSound(bangSound);
        status.innerText = `üíÄ ‡∏û‡∏•‡∏≤‡∏î ${diff.toFixed(2)} ‡∏ß‡∏¥`;
        status.style.color = "#ef5350";
        stopBtn.innerText = "‡∏î‡∏∑‡πà‡∏°! üç∫";
        stopBtn.style.background = "#ef5350";
    }

    stopBtn.disabled = true;
    spinBtn.disabled = false;
}

// --- Roulette Game Logic ---
function setupRouletteGame() {
    window.bulletChamber = Math.floor(Math.random() * 6);
    window.currentChamber = 0;
    specialGameArea.style.display = 'flex';
    // ‡∏•‡∏ö‡∏û‡∏ß‡∏Å animation ‡πÅ‡∏ù‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ô‡∏¥‡πà‡∏á‡∏™‡∏ô‡∏¥‡∏ó‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°
    specialGameArea.style.animation = "none"; 
    
    specialGameArea.innerHTML = `
        <div id="cylinder-container" style="display: flex; gap: 5px; margin-bottom: 20px;">
            ${Array(6).fill().map((_, i) => `<div id="chamber-${i}" style="width: 30px; height: 30px; border-radius: 50%; border: 2px solid #555; background: #222;"></div>`).join('')}
        </div>
        <div id="roulette-status" style="margin-bottom:15px; font-weight: bold; color: var(--warning);">‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏¥‡∏á... ‡πÉ‡∏Ñ‡∏£‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ?</div>
        <button class="game-btn" id="trigger-btn" onclick="pullTrigger()">ü§û ‡πÄ‡∏´‡∏ô‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏Å (‡∏ô‡∏±‡∏î‡∏ó‡∏µ‡πà 1)</button>
        ${getSkipButtonHTML()}
    `;
}

function pullTrigger() {
    const btn = document.getElementById('trigger-btn');
    const currentDot = document.getElementById(`chamber-${window.currentChamber}`);
    
    btn.disabled = true;
    currentDot.style.background = "#fff"; 
    playSound(gunSound); 

    setTimeout(() => {
        if (window.currentChamber === window.bulletChamber) {
            // --- ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡πÇ‡∏î‡∏ô‡∏¢‡∏¥‡∏á (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏à‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏™‡∏±‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏≠‡∏≤‡πÄ‡∏•‡∏¢‡∏ú‡∏°‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö) ---
            playSound(bangSound);
            currentDot.style.background = "#ef5350";
            currentDot.style.boxShadow = "0 0 15px #ef5350";
            
            // ‡∏•‡∏ö‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î shake ‡∏≠‡∏≠‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏∞‡∏ô‡∏¥‡πà‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÅ‡∏ó‡∏ô
            specialGameArea.innerHTML = `
                <div class="timer-text" style="font-size: 5rem;">üíÄ</div>
                <div style="color:#ef5350; font-size: 1.5rem; font-weight:bold; margin-bottom: 10px;">‡∏õ‡∏±‡∏á! ‡∏ï‡∏≤‡∏¢‡∏™‡∏ô‡∏¥‡∏ó</div>
                <div style="margin-bottom: 15px; color: #ddd;">‡∏à‡∏±‡∏î‡πÑ‡∏õ‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÅ‡∏Å‡πâ‡∏ß‡πÄ‡∏ï‡πá‡∏°‡πÜ!</div>
                ${getSkipButtonHTML()}
            `;
            spinBtn.disabled = false;
        } else {
            // --- ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡∏£‡∏≠‡∏î ---
            playSound(clickSound); 
            currentDot.style.background = "#444"; 
            currentDot.innerHTML = "‚úï";
            currentDot.style.display = "flex";
            currentDot.style.alignItems = "center";
            currentDot.style.justifyContent = "center";
            currentDot.style.fontSize = "12px";
            currentDot.style.color = "#888";
            
            window.currentChamber++;
            btn.disabled = false;
            btn.innerText = `ü§û ‡πÄ‡∏´‡∏ô‡∏µ‡πà‡∏¢‡∏ß‡πÑ‡∏Å (‡∏ô‡∏±‡∏î‡∏ó‡∏µ‡πà ${window.currentChamber + 1})`;
            
            const statusLabel = document.getElementById('roulette-status');
            statusLabel.innerText = `‡∏ô‡∏±‡∏î‡∏ó‡∏µ‡πà ${window.currentChamber} ‡∏£‡∏≠‡∏î! ‡∏™‡πà‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ï‡πà‡∏≠...`;
            statusLabel.style.color = "#00e676";
        }
    }, 800);
}

// --- Bomb Game Logic ---
function setupBombGame() {
    const bombWire = Math.floor(Math.random() * 4);
    const colors = ["#ef5350", "#00e676", "#42a5f5", "#ffca28"];
    
    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏ö‡∏≤‡πÜ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ö‡∏µ‡πä‡∏ö)
    let wiresHTML = colors.map((color, i) => `
        <div class="wire-btn" 
             style="background:${color}; position:relative; overflow:hidden; border:none; box-shadow: 0 4px #000, inset 0 -4px rgba(0,0,0,0.2);" 
             onclick="cutWire(this, ${i === bombWire})">
             <div style="position:absolute; top:50%; width:100%; height:2px; background:rgba(255,255,255,0.3);"></div>
        </div>
    `).join('');

    specialGameArea.style.display = 'flex';
    specialGameArea.innerHTML = `
        <div style="margin-bottom:15px; color:var(--danger); font-weight:bold; letter-spacing:2px;" id="bomb-hint">‚ö†Ô∏è ‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô! ‡∏ï‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡πÄ‡∏™‡πâ‡∏ô</div>
        <div class="wire-container" style="padding: 10px; background: #333; border-radius: 10px; border: 4px solid #444;">
            ${wiresHTML}
        </div>
        ${getSkipButtonHTML()}
    `;
}

function cutWire(el, isBomb) {
    if (isBomb) {
        playSound(bangSound); 
        el.style.background = "#000";
        el.style.transform = "translateY(4px)";
        el.style.boxShadow = "none";
        
        // Effect ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÅ‡∏î‡∏á‡∏ß‡∏≤‡∏ö
        document.body.style.background = "#ef5350";
        setTimeout(() => { document.body.style.background = "var(--bg-color)"; }, 200);

        specialGameArea.innerHTML = `
            <div class="timer-text">üí•</div>
            <div style="color:#ef5350; font-size: 2rem; font-weight:800; text-shadow: 0 0 10px rgba(0,0,0,0.5);">‡∏ö‡∏∂‡πâ‡∏°‡∏°‡∏°‡∏°‡∏°!</div>
            <div style="margin-top: 10px;">‡∏°‡∏∑‡∏≠‡∏™‡∏±‡πà‡∏ô‡πÄ‡∏´‡∏£‡∏≠? ‡∏î‡∏∑‡πà‡∏°‡∏ã‡∏∞!</div>
            ${getSkipButtonHTML()}
        `;
        specialGameArea.style.animation = "shake 0.5s infinite";
        setTimeout(() => { specialGameArea.style.animation = ""; }, 500);
        
        resultDisplay.innerText = "‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß! ‡∏î‡∏∑‡πà‡∏°‡∏°‡∏°‡∏°";
        spinBtn.disabled = false;
    } else {
        playSound(clickSound); 
        el.style.opacity = "0.2";
        el.style.transform = "translateY(2px)";
        el.style.pointerEvents = "none";
        document.getElementById('bomb-hint').innerText = "‡∏£‡∏≠‡∏î‡πÑ‡∏õ... ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°!";
        document.getElementById('bomb-hint').style.color = "#00e676";
    }
}

// --- Memory Game Logic ---
function setupMemoryGame() {
    const num = Math.floor(10000 + Math.random() * 90000);
    specialGameArea.innerHTML = `<div style="font-size:0.9rem; margin-bottom:10px; color:#aaa;">‡∏à‡∏î‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ô‡∏µ‡πâ‡πÉ‡∏ô 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ!</div><div class="timer-text" id="mem-num" style="color:#00e676;">${num}</div><div style="width:100%; height:6px; background:#333; border-radius:10px; overflow:hidden; margin-top:10px;"><div id="mem-progress" style="width:100%; height:100%; background:#00e676; transition: width 2s linear;"></div></div>`;
    setTimeout(() => { const progressBar = document.getElementById('mem-progress'); if(progressBar) progressBar.style.width = '0%'; }, 50);
    setTimeout(() => {
        const memNumDisplay = document.getElementById('mem-num');
        if (memNumDisplay) {
            specialGameArea.innerHTML = `<div style="font-size:1.1rem; margin-bottom:15px; font-weight:bold;">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏µ‡πâ‡πÄ‡∏•‡∏Ç‡∏≠‡∏∞‡πÑ‡∏£!?</div><input type="number" id="mem-input" autocomplete="off" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÑ‡∏î‡πâ" style="padding:15px; border-radius:12px; border:2px solid #00e676; width:90%; text-align:center; font-size:1.8rem; background:#000; color:#fff; margin-bottom:15px; outline:none;"><button class="game-btn" onclick="checkMemory(${num})" style="background:#00e676; color:#000;">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>${getSkipButtonHTML()}`;
            document.getElementById('mem-input').focus();
        }
    }, 2000);
}
function checkMemory(correct) {
    const inputEl = document.getElementById('mem-input');
    const val = parseInt(inputEl.value);
    if (val === correct) { resultDisplay.innerText = "‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏£‡∏≠‡∏î‡∏ï‡∏≤‡∏¢"; playSound(resultSound); }
    else { resultDisplay.innerText = `‡∏ú‡∏¥‡∏î! ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏∑‡∏≠ ${correct}`; playSound(bangSound); }
    specialGameArea.innerHTML = getSkipButtonHTML(); spinBtn.disabled = false;
}

// --- Alphabet Random Game Logic ---
function setupAlphabetGame() {
    specialGameArea.innerHTML = `
        <div id="alpha-display" class="timer-text" style="color:#00ccff;">?</div>
        <button class="game-btn" id="alpha-btn" onclick="runAlphabetSpin()">üé∞ ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£!</button>
        ${getSkipButtonHTML()}
    `;
}

function runAlphabetSpin() {
    const btn = document.getElementById('alpha-btn');
    const display = document.getElementById('alpha-display');
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    btn.disabled = true;
    
    let counter = 0;
    let speed = 50;
    
    // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡∏î‡∏£‡∏±‡∏ß‡πÜ ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏∏‡πà‡∏°
    let spinInterval = setInterval(() => {
        const randomChar = letters[Math.floor(Math.random() * letters.length)];
        display.innerText = randomChar;
        playSound(clickSound);
        counter++;
        
        if (counter > 20) {
            clearInterval(spinInterval);
            const finalLetter = letters[Math.floor(Math.random() * letters.length)];
            display.innerText = finalLetter;
            display.style.fontSize = "6rem"; // ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ
            
            playSound(resultSound);
            btn.innerText = "‡πÉ‡∏Ñ‡∏£‡∏°‡∏µ‡∏ï‡∏±‡∏ß '" + finalLetter + "' ‡∏î‡∏∑‡πà‡∏°!";
            btn.style.background = "#444";
            spinBtn.disabled = false; // ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡∏´‡∏•‡∏±‡∏Å
        }
    }, speed);
}

// --- Simon Says Game Logic (6 Colors Edition) ---
function setupSimonGame() {
    specialGameArea.style.display = 'flex';
    specialGameArea.innerHTML = `
        <div style="margin-bottom:10px; font-size:0.9rem; color:#aaa;">‡∏à‡∏≥‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÑ‡∏ü 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å!</div>
        <button class="game-btn" id="start-simon-btn" onclick="startSimon()">üß† ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏•‡∏≥‡∏î‡∏±‡∏ö!</button>
        ${getSkipButtonHTML()}
    `;
}

function startSimon() {
    const btn = document.getElementById('start-simon-btn');
    if(btn) btn.style.display = 'none';

    const colors = ['#f44336', '#4caf50', '#2196f3', '#ffeb3b', '#9c27b0', '#ff9800']; const seq = Array.from({length: 5}, () => Math.floor(Math.random() * 6)); let userIdx = 0;
    
    let html = `<div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px; width:100%;">`;
    colors.forEach((c, i) => {
        html += `<div id="simon-${i}" style="height:70px; background:${c}; opacity:0.2; border-radius:10px; transition:all 0.1s; border: 2px solid rgba(255,255,255,0.1);"></div>`;
    });
    html += `</div><div id="simon-status" style="margin-top:10px; color:var(--warning);">‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏î‡∏π...</div>`;
    specialGameArea.innerHTML = html;

    // ‡πÄ‡∏•‡πà‡∏ô Sequence
    let i = 0;
    const interval = setInterval(() => {
        if(i >= seq.length) {
            clearInterval(interval);
            document.getElementById('simon-status').innerText = "‡∏ï‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß! ‡∏Å‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡∏¢";
            document.getElementById('simon-status').style.color = "#00e676";
            
            // ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏î
            colors.forEach((c, idx) => {
                const el = document.getElementById(`simon-${idx}`);
                el.style.opacity = "1";
                el.style.cursor = "pointer";
                
                el.onclick = () => {
                    el.style.transform = "scale(0.9)";
                    setTimeout(() => el.style.transform = "scale(1)", 100);

                    if(idx !== seq[userIdx]) {
                        // --- ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏î‡∏ú‡∏¥‡∏î (‡∏î‡∏∑‡πà‡∏°!) ---
                        playSound(bangSound); // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                        resultDisplay.innerText = "‡∏û‡∏•‡∏≤‡∏î‡πÅ‡∏•‡πâ‡∏ß! ‡∏î‡∏∑‡πà‡∏°‡∏ã‡∏∞‡∏î‡∏µ‡πÜ";
                        document.getElementById('simon-status').innerText = "‚ùå ‡∏ú‡∏¥‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö!";
                        document.getElementById('simon-status').style.color = "#ef5350";
                        spinBtn.disabled = false;
                        // ‡∏õ‡∏¥‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏´‡πâ‡∏≤‡∏°‡∏Å‡∏î‡∏ï‡πà‡∏≠
                        document.querySelectorAll('[id^="simon-"]').forEach(d => d.onclick = null);
                    } else {
                        // --- ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏Å‡∏î‡∏ñ‡∏π‡∏Å (‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏ô‡∏∞) ---
                        playSound(clickSound); 
                        userIdx++;
                        
                        if(userIdx === seq.length) {
                            // ‡∏ä‡∏ô‡∏∞‡πÅ‡∏•‡πâ‡∏ß
                            playSound(resultSound); // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ä‡∏ô‡∏∞
                            resultDisplay.innerText = "‡∏™‡∏°‡∏≠‡∏á‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡∏£‡∏≠‡∏î‡∏ï‡∏≤‡∏¢";
                            document.getElementById('simon-status').innerText = "‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î!";
                            spinBtn.disabled = false;
                            document.querySelectorAll('[id^="simon-"]').forEach(d => d.onclick = null);
                        }
                    }
                };
            });
            return;
        }

        // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• Sequence ‡πÑ‡∏ü
        const active = document.getElementById(`simon-${seq[i]}`);
        if(active) {
            active.style.opacity = "1";
            active.style.boxShadow = `0 0 20px ${colors[seq[i]]}`;
            active.style.transform = "scale(1.05)";
            playSound(clickSound);
            
            setTimeout(() => {
                active.style.opacity = "0.2";
                active.style.boxShadow = "none";
                active.style.transform = "scale(1)";
            }, 450);
        }
        i++;
    }, 700); // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏ü
}

// --- Bottle Game Logic ---
function setupBottleGame() {
    specialGameArea.innerHTML = `<div id="bottle" style="font-size:4rem; transition: transform 3s ease-out;">üçæ</div><button class="game-btn" style="margin-top:20px;" onclick="spinBottle()">‡∏´‡∏°‡∏∏‡∏ô!</button>${getSkipButtonHTML()}`;
}
function spinBottle() {
    const rot = 720 + Math.floor(Math.random() * 360);
    document.getElementById('bottle').style.transform = `rotate(${rot}deg)`;
    playSound(clickSound);
    setTimeout(() => {
        resultDisplay.innerText = "‡∏Ç‡∏ß‡∏î‡∏ä‡∏µ‡πâ‡πÉ‡∏Ñ‡∏£ ‡∏î‡∏∑‡πà‡∏°!";
        playSound(alarmSound);
        spinBtn.disabled = false;
    }, 3000);
}
// --- Chain Math Game Logic ---
function setupChainMathGame() {
    const ops = ['+', '-'];
    const n1 = Math.floor(Math.random() * 15) + 5; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á
    const n2 = Math.floor(Math.random() * 9) + 1;
    const n3 = Math.floor(Math.random() * 9) + 1;
    const op1 = ops[Math.floor(Math.random() * 2)];
    const op2 = ops[Math.floor(Math.random() * 2)];
    const eq = `${n1}${op1}${n2}${op2}${n3}`;
    const ans = eval(eq);
    
    specialGameArea.style.display = 'flex';
    specialGameArea.innerHTML = `
        <div style="margin-bottom:10px; color:#ffca28;">‡∏Ñ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÑ‡∏ß! ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</div>
        <div class="timer-text" style="font-size: 3rem; margin-bottom:10px;">${eq} = ?</div>
        
        <div style="width:100%; height:10px; background:#444; border-radius:5px; margin-bottom:20px; overflow:hidden;">
            <div id="math-progress" style="width:100%; height:100%; background:#ef5350; transition: width 0.1s linear;"></div>
        </div>

        <input type="number" id="math-ans" pattern="[0-9]*" inputmode="numeric" 
               style="width:60%; padding:15px; text-align:center; font-size:1.5rem; border-radius:10px; border:none; margin-bottom:15px;" 
               placeholder="‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö...">
        
        <button class="game-btn" id="math-submit" onclick="solveChain(${ans})">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö!</button>
        ${getSkipButtonHTML()}
    `;

    // ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    setTimeout(() => document.getElementById('math-ans').focus(), 100);

    // ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ 7 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    let timeLeft = 7.0;
    const totalTime = 7.0;
    
    window.mathTimer = setInterval(() => {
        timeLeft -= 0.1;
        const progressBar = document.getElementById('math-progress');
        if(progressBar) {
            const percent = (timeLeft / totalTime) * 100;
            progressBar.style.width = percent + "%";
        }

        if (timeLeft <= 0) {
            clearInterval(window.mathTimer);
            failMathGame(ans); // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ = ‡πÅ‡∏û‡πâ
        }
    }, 100);
}

function solveChain(ans) {
    clearInterval(window.mathTimer); // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏Å‡∏î‡∏ï‡∏≠‡∏ö
    const input = document.getElementById('math-ans');
    const user = parseInt(input.value);
    
    if (user === ans) {
        resultDisplay.innerText = "‡∏™‡∏°‡∏≠‡∏á‡πÑ‡∏ß! ‡∏£‡∏≠‡∏î‡∏ï‡∏≤‡∏¢";
        resultDisplay.style.color = "#00e676";
        playSound(resultSound);
        specialGameArea.innerHTML = `<div class="timer-text" style="color:#00e676;">‚úÖ ${ans}</div><div style="margin-top:10px;">‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏£‡∏≠‡∏î‡πÑ‡∏õ...</div>`;
    } else {
        failMathGame(ans);
    }
    spinBtn.disabled = false;
}

function failMathGame(correctAns) {
    clearInterval(window.mathTimer);
    playSound(bangSound); // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏∏‡πâ‡∏á
    specialGameArea.style.animation = "shake 0.5s";
    
    specialGameArea.innerHTML = `
        <div class="timer-text" style="color:#ef5350;">üí• ‡∏ö‡∏∂‡πâ‡∏°!</div>
        <div style="color:#ef5350; font-weight:bold; font-size:1.2rem;">‡πÄ‡∏â‡∏•‡∏¢‡∏Ñ‡∏∑‡∏≠: ${correctAns}</div>
        <div style="margin-top:10px;">‡∏Ñ‡∏¥‡∏î‡∏ä‡πâ‡∏≤/‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î ‡∏à‡∏±‡∏î‡πÑ‡∏õ 1 ‡πÅ‡∏Å‡πâ‡∏ß!</div>
    `;
    resultDisplay.innerText = "‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß! ‡∏î‡∏∑‡πà‡∏°‡∏°‡∏°‡∏°";
    spinBtn.disabled = false;
}

// --- Tap War: Battle Royale Edition ---
function setupTapWarGame() {
    window.warScore = 50; // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡πÜ
    window.warActive = false; // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏à‡∏ö
    
    specialGameArea.style.display = 'flex';
    specialGameArea.innerHTML = `
        <div id="tap-war-container" style="width:100%; position:relative;">
            <div style="text-align:center; color:#fff; margin-bottom:10px; font-weight:bold;">
                üîµ ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô VS ‡πÅ‡∏î‡∏á üî¥
            </div>
            
            <div id="battle-field" style="display:flex; height:200px; width:100%; border-radius:15px; overflow:hidden; border:3px solid #444; position:relative;">
                <div id="p1-area" onclick="tapWar(1)" style="flex:50; background:linear-gradient(45deg, #1976d2, #2196f3); transition: flex 0.1s ease-out; cursor:pointer; display:flex; flex-direction:column; align-items:center; justify-content:center;">
                    <span style="font-size:2rem;">üîµ</span>
                    <span id="p1-percent" style="font-weight:bold;">50%</span>
                </div>
                <div id="p2-area" onclick="tapWar(2)" style="flex:50; background:linear-gradient(45deg, #f44336, #d32f2f); transition: flex 0.1s ease-out; cursor:pointer; display:flex; flex-direction:column; align-items:center; justify-content:center;">
                    <span style="font-size:2rem;">üî¥</span>
                    <span id="p2-percent" style="font-weight:bold;">50%</span>
                </div>
                
                <div id="war-overlay" style="position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:center; z-index:10;">
                    <button class="game-btn" id="start-war-btn" onclick="startTapWarCountdown()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏®‡∏∂‡∏Å‡∏ô‡∏µ‡πâ!</button>
                </div>
            </div>
            <div id="war-hint" style="text-align:center; font-size:0.8rem; margin-top:10px; color:#aaa;">‡∏ß‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏•‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ß‡∏ô‡∏¥‡πâ‡∏ß‡πÉ‡∏™‡πà‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á!</div>
        </div>
    `;
}

function startTapWarCountdown() {
    const btn = document.getElementById('start-war-btn');
    const overlay = document.getElementById('war-overlay');
    let count = 3;
    
    btn.disabled = true;
    let timer = setInterval(() => {
        btn.innerText = count;
        btn.style.fontSize = "3rem";
        playSound(clickSound);
        count--;
        
        if(count < 0) {
            clearInterval(timer);
            overlay.style.display = 'none';
            window.warActive = true;
            document.getElementById('war-hint').innerText = "‡∏£‡∏±‡∏ß‡∏ß‡∏ß‡∏ß‡∏ß‡∏ß‡∏ß‡∏ß‡∏ß‡∏ß!!!";
            document.getElementById('war-hint').style.color = "#ffca28";
        }
    }, 800);
}

function tapWar(player) {
    if(!window.warActive) return;

    // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏ß: ‡∏Å‡∏î 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏î 4% (‡πÉ‡∏Ñ‡∏£‡∏Å‡∏î‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏ä‡∏ô‡∏∞)
    if(player === 1) window.warScore += 4;
    else window.warScore -= 4;
    
    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI
    const p1 = document.getElementById('p1-area');
    const p2 = document.getElementById('p2-area');
    p1.style.flex = window.warScore;
    p2.style.flex = 100 - window.warScore;
    
    document.getElementById('p1-percent').innerText = window.warScore + "%";
    document.getElementById('p2-percent').innerText = (100 - window.warScore) + "%";
    
    playSound(clickSound);

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞
    if(window.warScore >= 100 || window.warScore <= 0) {
        window.warActive = false;
        const winner = window.warScore >= 100 ? "‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô" : "‡πÅ‡∏î‡∏á";
        const winColor = window.warScore >= 100 ? "#2196f3" : "#f44336";
        const loser = window.warScore >= 100 ? "‡πÅ‡∏î‡∏á" : "‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô";
        
        showWarWinner(winner, winColor, loser);
    }
}

function showWarWinner(winner, color, loser) {
    playSound(resultSound);
    const container = document.getElementById('tap-war-container');
    
    container.innerHTML = `
        <div style="text-align:center; padding:20px; background:${color}; border-radius:15px; animation: bounce 0.5s infinite alternate;">
            <div style="font-size:3rem; margin-bottom:10px;">üëë</div>
            <div style="font-size:1.8rem; font-weight:800; color:#fff;">‡∏ó‡∏µ‡∏°‡∏™‡∏µ${winner} ‡∏ä‡∏ô‡∏∞!</div>
            <div style="font-size:1.2rem; color:#fff; margin-top:5px;">‡∏™‡∏µ${loser} ‡∏î‡∏∑‡πà‡∏°!</div>
        </div>
        ${getSkipButtonHTML()}
    `;
    
    resultDisplay.innerText = `‡∏à‡∏ö‡∏®‡∏∂‡∏Å! ‡∏™‡∏µ${winner} ‡πÄ‡∏õ‡πá‡∏ô‡∏ù‡πà‡∏≤‡∏¢‡∏ä‡∏ô‡∏∞`;
    spinBtn.disabled = false;
}

// =================== History ===================
function openHistory() {
    playSound(clickSound); historyModal.classList.add('active');
    if (history.length === 0) { historyListDisplay.innerHTML = '<li style="text-align:center; padding:20px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</li>'; return; }
    historyListDisplay.innerHTML = history.map(h => `<li class="history-item"><span class="history-tag" style="background:${h.color}">${h.c}</span><span style="flex:1;">${h.t}</span></li>`).join("");
}
function closeHistory() { historyModal.classList.remove('active'); }
historyModal.addEventListener('click', (e) => { if (e.target === historyModal) closeHistory(); });
</script>
    
</body>

</html>
